# Festo Station Performance Metrics

## 概述

本文档介绍了为Festo分配站仿真程序新增的性能指标功能。这些功能可以帮助您分析和优化工业自动化系统的性能。

## 新增功能

### 1. 实时性能指标计算

程序现在可以实时计算以下关键性能指标（KPI）：

#### 生产效率指标
- **总处理工件数** - 系统启动以来处理的工件总数
- **总完成循环数** - 完整的工作循环次数
- **吞吐量** - 每小时处理的工件数量（pieces/hour）

#### 时间分析指标
- **总仿真时间** - 系统运行的总时间
- **平均循环时间** - 完成一个工件处理的平均时间
- **总停机时间** - 等待手动补料的总时间
- **设备利用率** - 设备有效工作时间占总时间的百分比

#### 补料分析指标
- **补料次数** - 手动补料的总次数
- **平均补料时间** - 每次补料操作的平均耗时

#### 状态持续时间分析
- **各状态耗时** - 系统在每个工作状态下的累计时间
  - State 0: 空闲状态
  - State 1: 气缸伸出
  - State 2: 移动到料仓
  - State 3: 真空开启
  - State 4: 气缸缩回
  - State 5: 返回下游站
  - State 6: 真空关闭

### 2. 性能指标显示面板

新增了专门的性能指标显示窗口，具有以下特点：

- **实时更新** - 每秒更新一次性能数据
- **分类显示** - 按功能分组显示不同类型的指标
- **直观界面** - 清晰的标签和数值显示
- **颜色编码** - 重要数值使用蓝色高亮显示

### 3. 性能报告导出

支持将性能数据导出为JSON格式的报告文件：

- **时间戳** - 自动添加导出时间
- **完整数据** - 包含所有计算的性能指标
- **原始数据** - 包含循环时间和补料时间的详细列表
- **文件命名** - 自动生成带时间戳的文件名

### 4. 指标重置功能

提供重置所有性能指标的功能：

- **确认对话框** - 防止意外重置
- **完全重置** - 清除所有累计数据
- **重新开始** - 从当前时间重新开始计算

## 使用方法

### 启动性能监控

1. 运行程序：`python festo.py`
2. 点击"Start"按钮开始仿真
3. 点击"Performance Metrics"按钮打开性能面板

### 查看实时指标

性能面板会自动显示实时更新的性能数据，包括：
- 当前吞吐量
- 设备利用率
- 平均循环时间
- 各状态耗时统计

### 导出性能报告

1. 在性能面板中点击"Export Performance Report"
2. 系统会生成JSON格式的报告文件
3. 文件名格式：`performance_report_YYYYMMDD_HHMMSS.json`

### 重置性能指标

1. 在性能面板中点击"Reset Metrics"
2. 确认重置操作
3. 所有性能指标将清零并重新开始计算

## 性能指标计算公式

### 吞吐量计算
```
吞吐量 = (总处理工件数 / 总仿真时间) × 3600 (pieces/hour)
```

### 设备利用率计算
```
设备利用率 = ((总仿真时间 - 总停机时间) / 总仿真时间) × 100%
```

### 平均循环时间计算
```
平均循环时间 = 所有循环时间的总和 / 循环次数
```

## 瓶颈分析

通过状态持续时间分析，您可以识别系统瓶颈：

1. **最耗时状态** - 查看哪个状态占用时间最长
2. **优化机会** - 分析是否可以并行执行某些操作
3. **设备效率** - 评估各个执行器的工作效率

## 应用场景

这些性能指标可用于：

- **生产规划** - 基于吞吐量数据制定生产计划
- **设备优化** - 识别和消除生产瓶颈
- **维护计划** - 基于利用率数据安排维护时间
- **成本分析** - 计算设备投资回报率
- **质量改进** - 监控生产稳定性和一致性

## 技术实现

性能指标功能的技术特点：

- **低开销** - 最小化对仿真性能的影响
- **实时计算** - 在状态转换时即时更新指标
- **内存效率** - 合理管理历史数据存储
- **线程安全** - 支持多线程环境下的数据访问

## 扩展可能性

未来可以考虑添加的功能：

- **趋势图表** - 显示性能指标的时间趋势
- **报警系统** - 当性能指标超出阈值时发出警告
- **对比分析** - 比较不同时间段的性能数据
- **预测分析** - 基于历史数据预测未来性能
- **数据库集成** - 将性能数据存储到数据库中

## 结论

新增的性能指标功能为Festo分配站仿真程序提供了强大的分析能力，使用户能够：

1. **实时监控** 系统性能
2. **量化分析** 生产效率
3. **识别瓶颈** 并优化流程
4. **导出报告** 用于进一步分析
5. **支持决策** 制定基于数据的改进方案

这些功能完全符合工业4.0和智能制造的要求，为工业自动化系统的性能优化提供了有力支持。
